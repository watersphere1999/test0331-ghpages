{"version":3,"sources":["pages/HikingFrontend/ResetPassword.js"],"names":["useStyles","makeStyles","theme","form","width","submit","height","margin","backgroundColor","color","borderRadius","container","padding","InputBackground","borderColor","Title","fontFamily","fontSize","fontweight","lineheight","letterspacing","Text","fontWeight","fontStretch","fontStyle","lineHeight","letterSpacing","Hint","ModifyTextFieldColor","DailogTitle","DailogContent","DailogCheck","ErrorInfo","SignIn","classes","React","useState","open","setOpen","maxWidth","useForm","register","handleSubmit","errors","watch","password","useRef","current","responsedJSON","setComfirm","axios","useHistory","require","handleClose","token","localStorage","getItem","console","log","substring","length","headers","onSubmit","data","a","post","then","response","catch","error","finally","className","textalign","inputRef","required","minLength","id","label","name","type","onChange","event","target","value","validate","confirm","message","variant","onClose","component","onClick"],"mappings":"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","file":"static/js/38.012d0c43.chunk.js","sourcesContent":["import React, { useRef } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Page from 'material-ui-shell/lib/containers/Page';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input'\r\nimport { useForm } from 'react-hook-form';\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n  },\r\n  submit: {\r\n    width: '-webkit-fill-available',\r\n    height: '48px',\r\n    margin: '56px 0 0',\r\n    backgroundColor: '#00d04c',\r\n    color: '#ffffff',\r\n    borderRadius: 4\r\n  },\r\n  container: {\r\n    width: '-webkit-fill-available',\r\n    height: '768px',\r\n    padding: '125px 16px 213px',\r\n    backgroundColor: '#ffffff'\r\n  },\r\n  InputBackground:{\r\n    width: '-webkit-fill-available',\r\n    height: '40px',\r\n    margin: '1px 0 0',\r\n    padding: '9px 0 0',\r\n    borderColor:'#232323',\r\n  },\r\n  Title:{\r\n    width: '98px',\r\n    height: '36px',\r\n    margin: '0 281px 31px 0',\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: '24px',\r\n    fontweight: 500,\r\n    lineheight: 1.5,\r\n    letterspacing: '0.5px',\r\n    color: '#232323'\r\n  },\r\n  Text:{\r\n    width: '66px',\r\n    height:'24px',\r\n    margin: '0 313px 1px 0',\r\n    fontSize: '16px',\r\n    fontWeight: '500',\r\n    fontStretch: 'normal',\r\n    fontStyle: 'normal',\r\n    lineHeight: '1.5',\r\n    letterSpacing: '0.5px',\r\n    color: '#232323',\r\n  },\r\n  Hint:{\r\n    width: '180px',\r\n    height: '21px',\r\n    margin: '16px 211px 55px 0',\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: '14px',\r\n    fontWeight: 'normal',\r\n    fontStretch: 'normal',\r\n    fontStyle: 'normal',\r\n    lineHeight: '1.5',\r\n    letterSpacing: '0.5px',\r\n    color: '#979797',\r\n  },\r\n  ModifyTextFieldColor: {\r\n    fontSize: '14px',\r\n    color: '#979797',  \r\n    borderColor:'#979797'\r\n  },\r\n  DailogTitle:{\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: '20px',\r\n    fontWeight:500,\r\n    borderColor:'#232323'\r\n  },\r\n  DailogContent:{\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: '16px',\r\n    borderColor:'#979797'\r\n  },\r\n  DailogCheck:{\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: '14px',\r\n    fontWeight:500,\r\n    borderColor:'#007aff'\r\n  },\r\n  ErrorInfo:{\r\n    width: '100%',\r\n    height: '21px',\r\n    margin: '16px 263px 56px 0',\r\n    fontFamily: \"NotoSansCJKtc\",\r\n    fontSize: '14px',\r\n    fontWeight: 'normal',\r\n    fontStretch: 'normal',\r\n    fontStyle: 'normal',\r\n    lineHeight: '1.5',\r\n    letterSpacing: '0.5px',\r\n    color: '#ff3b30',\r\n  },\r\n}));\r\n\r\nexport default function SignIn() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [maxWidth] = React.useState('xs');\r\n  const { register, handleSubmit, errors, watch } = useForm()\r\n  const password = useRef({});\r\n  password.current = watch(\"password\", \"\");\r\n  // const [password, setPassword] = React.useState(''); \r\n  const [comfirm, setComfirm] = React.useState('');\r\n  const history = useHistory()\r\n  const axios = require('axios');\r\n  let responsedJSON;\r\n\r\n  function backhandleClick() {\r\n    history.push(\"/signin\");\r\n  }\r\n\r\n  //Open Dailog\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    // backhandleClick()\r\n  };\r\n  //get token from verify\r\n  const token = localStorage.getItem('token')\r\n  console.log(token.substring(10, token.length - 2))\r\n  // console.log('token: ' + localStorage.getItem('token'));\r\n  const headers = {\r\n    'Authorization': 'Bearer '+token.substring(10, token.length - 2)\r\n  }\r\n  console.log(headers);\r\n  // API POST\r\n  const onSubmit = async (data) => {\r\n    console.log(data);\r\n    await axios.post('https://gohiking-server.herokuapp.com/api/password/change', data ,{ headers })\r\n    .then(function (response) {\r\n      console.log('correct');\r\n      //const { token } = response.data;\r\n      responsedJSON = response.data\r\n      handleClickOpen(true);\r\n      //localStorage.setItem('token', token)\r\n    })\r\n    .catch(function (error) {\r\n      console.log('error');\r\n      responsedJSON = error.response.data;\r\n    })\r\n    .finally(function () {\r\n      console.log(responsedJSON);\r\n    });  \r\n  }\r\n\r\n  return (\r\n      <div className={classes.container}>\r\n        <Typography className={classes.Title} textalign=\"left\">\r\n          重設密碼\r\n        </Typography>\r\n        <form className={classes.form} onSubmit={handleSubmit(onSubmit)} >\r\n        <Typography className={classes.Text}  textalign=\"left\">\r\n          密碼 \r\n        </Typography>   \r\n          <Input\r\n            // onChange={event => setPassword(event.target.value)}\r\n            inputRef={register({ required: true, minLength: 8 })}\r\n            className={classes.InputBackground}\r\n            id=\"password\"\r\n            label=\"請輸入新的密碼\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n          />\r\n        <Typography className={classes.ErrorInfo} >\r\n          {errors.password && \"密碼必須包含8個字元以上\"}\r\n        </Typography> \r\n        <Typography className={classes.Text}  textalign=\"left\">\r\n          確認密碼\r\n        </Typography>  \r\n          <Input\r\n            onChange={event => setComfirm(event.target.value)}\r\n            className={classes.InputBackground}\r\n            id=\"confirm\"\r\n            label=\"請重新輸入密碼 \"\r\n            name=\"confirm\"\r\n            type=\"password\"\r\n            inputRef={register({ \r\n              validate: value =>\r\n              value === password.current || \"密碼不一致！\" \r\n              })}\r\n          />\r\n        <Typography className={classes.ErrorInfo}>\r\n          {errors.confirm && <p>{errors.confirm.message}</p>}\r\n        </Typography> \r\n        <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            className={classes.submit}\r\n            // onClick={handleClickOpen }\r\n          >\r\n          繼續\r\n        </Button>\r\n        <Dialog\r\n          maxWidth={maxWidth}\r\n          open={open}\r\n          onClose={handleClose}\r\n        >\r\n          <DialogTitle>\r\n          <Typography component={'span'} className={classes.DailogTitle}>密碼更新成功</Typography>\r\n          </DialogTitle>\r\n          <DialogContent >\r\n            <DialogContentText>\r\n              <Typography component={'span'} className={classes.DailogContent}>請重新以新的密碼登入使用。</Typography>\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleClose} color=\"primary\"  >\r\n            <Typography component={'span'} className={classes.DailogCheck}>完成</Typography>\r\n            </Button>\r\n          </DialogActions>\r\n      </Dialog>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"sourceRoot":""}